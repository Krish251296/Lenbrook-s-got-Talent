<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lenbrook's Got Talent ‚Äì Submission</title>

  <style>
    /* ===== GLOBAL THEME ===== */

    :root {
      --bg-start: #0a1633;
      --bg-end: #1b2b5a;
      --gold: #ffd86b;
      --white: #fff;
      --glass-bg: rgba(15, 26, 56, 0.6);
      --glass-border: rgba(255, 255, 255, 0.12);
      --text-dim: #c7d2ff;
      --danger: #ff6b6b;
      --success: #6bff9a;
    }

    * {
      box-sizing: border-box;
      -webkit-font-smoothing: antialiased;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color: var(--white);
      background: radial-gradient(circle at 20% 20%, var(--bg-end) 0%, var(--bg-start) 60%);
      position: relative;
      overflow-x: hidden;
    }

    /* snowfall canvas sits behind everything */
    #snowCanvas {
      position: fixed;
      inset: 0;
      z-index: 0;
      pointer-events: none;
    }

    /* main page wrapper */
    .page {
      position: relative;
      z-index: 1;
      padding: 24px clamp(16px, 2vw, 32px) 64px;
      max-width: 1200px;
      margin: 0 auto;
    }

    /* header row with logo + title cluster */
    .header-bar {
      display: flex;
      flex-wrap: wrap;
      align-items: flex-start;
      gap: 16px 24px;
    }

    .brand-block {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      min-width: 180px;
    }

    .brand-block img {
      width: 140px;
      height: auto;
      object-fit: contain;
      filter: drop-shadow(0 4px 8px rgba(0,0,0,0.6));
    }

    .presented {
      color: var(--gold);
      font-size: 0.8rem;
      font-weight: 500;
      margin-top: 4px;
      text-shadow: 0 0 6px rgba(255,216,107,0.5);
      letter-spacing: 0.03em;
    }

    .title-block {
      flex: 1;
      min-width: 250px;
    }

    .page-title {
      margin: 0;
      font-size: clamp(1.4rem, 1vw + 1rem, 1.8rem);
      font-weight: 600;
      color: var(--gold);
      text-shadow: 0 0 8px rgba(255,216,107,0.4);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .page-sub {
      margin: 4px 0 0;
      font-size: 0.9rem;
      color: var(--text-dim);
      line-height: 1.4;
    }

    /* glass card */
    .card {
      margin-top: 24px;
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      box-shadow:
        0 20px 60px rgba(0,0,0,0.8),
        0 0 40px rgba(255,216,107,0.07);
      backdrop-filter: blur(8px);
      border-radius: 16px;
      padding: 24px clamp(16px,2vw,24px);
      animation: fadeInUp 0.6s both;
    }

    .card h2 {
      margin: 0 0 12px;
      font-size: 1rem;
      font-weight: 600;
      color: var(--gold);
      text-shadow: 0 0 8px rgba(255,216,107,0.4);
      letter-spacing: .03em;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .hint {
      font-size: 0.8rem;
      line-height: 1.4;
      color: var(--text-dim);
      margin-bottom: 16px;
    }

    /* form layout */
    form {
      display: grid;
      gap: 16px;
      max-width: 480px;
    }

    .field-group {
      display: grid;
      gap: 6px;
    }

    label {
      font-size: 0.8rem;
      font-weight: 500;
      color: var(--white);
    }

    input[type="text"],
    textarea,
    input[type="file"] {
      width: 100%;
      background: rgba(0,0,0,0.4);
      border: 1px solid rgba(255,255,255,0.18);
      border-radius: 10px;
      padding: 10px 12px;
      font-size: 0.9rem;
      line-height: 1.4;
      color: var(--white);
      outline: none;
      box-shadow: 0 0 20px rgba(255,216,107,0.08);
      transition: box-shadow .15s, border .15s, background .15s;
    }

    input[type="text"]:focus,
    textarea:focus,
    input[type="file"]:focus {
      border: 1px solid var(--gold);
      box-shadow:
        0 0 12px rgba(255,216,107,0.5),
        0 0 48px rgba(255,216,107,0.15);
      background: rgba(0,0,0,0.55);
    }

    textarea {
      min-height: 70px;
      resize: vertical;
    }

    /* button */
    button[type="submit"] {
      appearance: none;
      border: 0;
      cursor: pointer;
      background-image: radial-gradient(circle at 0% 0%, #fff7d2 0%, #ffd86b 40%, #a87815 100%);
      color: #2a1a00;
      font-weight: 600;
      border-radius: 10px;
      box-shadow:
        0 12px 32px rgba(255,216,107,.4),
        0 0 60px rgba(255,216,107,.2);
      font-size: 0.95rem;
      padding: 12px 16px;
      line-height: 1.2;
      transition: box-shadow .15s, transform .15s;
    }

    button[type="submit"]:hover {
      transform: translateY(-1px) scale(1.02);
      box-shadow:
        0 16px 40px rgba(255,216,107,.55),
        0 0 70px rgba(255,216,107,.28);
    }

    /* status message */
    #statusMsg {
      font-size: 0.85rem;
      font-weight: 500;
      min-height: 1.2em;
    }
    .ok    { color: var(--success); text-shadow:0 0 6px rgba(107,255,154,.4); }
    .error { color: var(--danger);  text-shadow:0 0 6px rgba(255,107,107,.4); }

    /* utility footer note */
    .foot-hint {
      margin-top: 24px;
      font-size: 0.7rem;
      color: var(--text-dim);
      text-align: center;
      line-height: 1.4;
    }

    /* little "tab links" row */
    .nav-row {
      margin-top: 28px;
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
    }

    .nav-chip {
      font-size: 0.8rem;
      color: var(--gold);
      background: rgba(255,216,107,0.08);
      border: 1px solid rgba(255,216,107,0.4);
      box-shadow: 0 8px 24px rgba(0,0,0,.8), 0 0 24px rgba(255,216,107,.2);
      padding: 8px 12px;
      border-radius: 999px;
      text-decoration: none;
      font-weight: 500;
      line-height: 1.2;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: box-shadow .15s, transform .15s, background .15s;
    }

    .nav-chip:hover {
      background: rgba(255,216,107,0.16);
      transform: translateY(-1px) scale(1.03);
      box-shadow: 0 16px 32px rgba(0,0,0,.9), 0 0 32px rgba(255,216,107,.4);
    }

    /* keyframe for card fade in */
    @keyframes fadeInUp {
      0% {opacity:0; transform:translateY(12px) scale(.98);}
      100% {opacity:1; transform:translateY(0) scale(1);}
    }
  </style>
</head>

<body>
  <!-- snowfall canvas -->
  <canvas id="snowCanvas"></canvas>

  <main class="page">
    <!-- header / brand -->
    <header class="header-bar">
      <div class="brand-block">
        <!-- your logo file -->
        <img src="logo.png" alt="Lenbrook's Got Talent Logo">
        <div class="presented">Presented by Party Patrol ‚ùÑÔ∏è</div>
      </div>

      <div class="title-block">
        <h1 class="page-title">
          üé§ Submit Your Act
        </h1>
        <p class="page-sub">
          Upload your video for the Christmas Lunch showcase.
          Teams & solo acts welcome. Be legendary. ‚ú®
        </p>
      </div>
    </header>

    <!-- submission card -->
    <section class="card">
      <h2>üì§ Performance Submission</h2>
      <div class="hint">
        Please share your team / participant name and your act.
        Video max ~100MB. MP4 recommended.
      </div>

      <form id="submissionForm" enctype="multipart/form-data">
        <div class="field-group">
          <label for="name">Team / Participant Name *</label>
          <input type="text" id="name" name="name" placeholder="e.g. 'The Holiday Harmonies'" required />
        </div>

        <div class="field-group">
          <label for="description">Act Description *</label>
          <textarea id="description" name="description" placeholder="Briefly describe your talent performance" required></textarea>
        </div>

        <div class="field-group">
          <label for="videoFile">Performance Video *</label>
          <input type="file" id="videoFile" name="video" accept="video/*" required />
        </div>

        <button type="submit">Submit Video ‚ú®</button>
        <div id="statusMsg"></div>
      </form>
    </section>

    <div class="nav-row">
      <a class="nav-chip" href="review.html">üìù Judge Panel</a>
      <a class="nav-chip" href="leaderboard.html">üèÜ Leaderboard</a>
      <a class="nav-chip" href="admin.html">üîê Admin</a>
    </div>

    <div class="foot-hint">
      By submitting, you agree we can show this at the Lenbrook Christmas Lunch Event.
    </div>
  </main>

  <!-- ===== JS: snowfall + upload logic ===== -->
  <script>
    // Snowfall animation (dense & faster)
    const canvas = document.getElementById("snowCanvas");
    const ctx = canvas.getContext("2d");
    let w, h, flakes;

    function initSnow() {
      w = canvas.width = window.innerWidth;
      h = canvas.height = window.innerHeight;
      flakes = Array.from({ length: 140 }).map(() => ({
        x: Math.random() * w,
        y: Math.random() * h,
        r: Math.random() * 2 + 1,
        dY: Math.random() * 1 + 0.5,
        dX: Math.random() * 0.6 - 0.3
      }));
    }

    function drawSnow() {
      ctx.clearRect(0, 0, w, h);
      ctx.fillStyle = "rgba(255,255,255,0.9)";
      ctx.shadowColor = "rgba(255,255,255,0.6)";
      ctx.shadowBlur = 8;
      flakes.forEach(f => {
        ctx.beginPath();
        ctx.arc(f.x, f.y, f.r, 0, Math.PI*2);
        ctx.fill();
      });
      updateSnow();
      requestAnimationFrame(drawSnow);
    }

    function updateSnow() {
      flakes.forEach(f => {
        f.y += f.dY;
        f.x += f.dX;
        if (f.y > h) { f.y = -5; f.x = Math.random() * w; }
        if (f.x > w) { f.x = 0; }
        if (f.x < 0) { f.x = w; }
      });
    }

    window.addEventListener("resize", initSnow);
    initSnow();
    drawSnow();
  </script>

  <script>
    // ===== UPLOAD LOGIC (unchanged, same endpoint) =====
    const FUNCTION_URL = "https://uploadvideo-43f5xuljna-uc.a.run.app/"; // your Cloud Run / Function URL

    const form = document.getElementById("submissionForm");
    const statusMsg = document.getElementById("statusMsg");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      statusMsg.className = "";
      statusMsg.textContent = "‚è≥ Uploading video... please wait.";

      const name = document.getElementById("name").value.trim();
      const description = document.getElementById("description").value.trim();
      const file = document.getElementById("videoFile").files[0];

      if (!file) {
        statusMsg.className = "error";
        statusMsg.textContent = "Please select a video file!";
        return;
      }

      try {
        const formData = new FormData();
        formData.append("video", file);
        formData.append("name", name);
        formData.append("description", description);

        const response = await fetch(FUNCTION_URL, {
          method: "POST",
          body: formData
        });

        const text = await response.text();
        let result;
        try {
          result = JSON.parse(text);
        } catch {
          throw new Error(text);
        }

        if (response.ok) {
          statusMsg.className = "ok";
          statusMsg.textContent = "‚úÖ Submission successful! Thank you!";
          form.reset();
        } else {
          statusMsg.className = "error";
          statusMsg.textContent = "Error: " + (result.error || "Unknown error");
        }
      } catch (err) {
        statusMsg.className = "error";
        statusMsg.textContent = "Upload failed: " + err.message;
      }
    });
  </script>
</body>
</html>
